<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thief vs Police</title>
<style>
  body { margin: 0; background: black; overflow: hidden; }
  canvas { display: block; margin: 0 auto; background: #111; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const player = { x: 400, y: 300, size: 30, color: 'blue', speed: 5 };
let policeList = [{ x: Math.random()*770, y: Math.random()*570, size: 30, color: 'red' }];
const policeSpeed = 2;

let keys = {};
let startTime = Date.now();
let lastDoubleTime = startTime;

// Controls
window.addEventListener('keydown', e => keys[e.key] = true);
window.addEventListener('keyup', e => keys[e.key] = false);

// Game loop
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Timer
    const elapsed = Math.floor((Date.now() - startTime)/1000);
    ctx.fillStyle = 'white';
    ctx.font = '20px Arial';
    ctx.fillText(`Time Survived: ${elapsed}s`, 10, 25);

    // Double police every 25 sec
    if(Date.now() - lastDoubleTime > 25000){
        const newPolices = policeList.map(p => ({ x: Math.random()*770, y: Math.random()*570, size: 30, color: 'red' }));
        policeList = policeList.concat(newPolices);
        lastDoubleTime = Date.now();
    }

    // Move player
    if(keys['ArrowLeft'] && player.x - player.speed > 0) player.x -= player.speed;
    if(keys['ArrowRight'] && player.x + player.speed < canvas.width - player.size) player.x += player.speed;
    if(keys['ArrowUp'] && player.y - player.speed > 0) player.y -= player.speed;
    if(keys['ArrowDown'] && player.y + player.speed < canvas.height - player.size) player.y += player.speed;

    // Draw player
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // Move & draw police
    for(const police of policeList){
        let offsetX = Math.floor(Math.random()*3)-1;
        let offsetY = Math.floor(Math.random()*3)-1;

        if(police.x < player.x + offsetX) police.x += policeSpeed;
        if(police.x > player.x + offsetX) police.x -= policeSpeed;
        if(police.y < player.y + offsetY) police.y += policeSpeed;
        if(police.y > player.y + offsetY) police.y -= policeSpeed;

        ctx.fillStyle = police.color;
        ctx.fillRect(police.x, police.y, police.size, police.size);

        // Collision
        if(Math.abs(police.x - player.x)<player.size && Math.abs(police.y - player.y)<player.size){
            alert(`Caught! You survived ${elapsed} seconds.`);
            window.location.reload();
        }
    }

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
